<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Men√∫ | Pupusas y M√°s</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>

body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:#f5efe6;
    color:#3b2f2f;
}

/* HEADER */
header{
    background:white;
    padding:10px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

header img{
    height:120px;
}

.cart-icon{
    position:relative;
    cursor:pointer;
    font-weight:600;
}

.cart-count{
    position:absolute;
    top:-8px;
    right:-12px;
    background:#d6b98c;
    border-radius:50%;
    padding:4px 8px;
    font-size:12px;
}

/* MENU */
section{
    max-width:900px;
    margin:auto;
    padding:30px 20px;
}

h1{
    font-family:'Playfair Display',serif;
    text-align:center;
}

.menu-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin:20px 0;
}

.menu-item button{
    background:#d6b98c;
    border:none;
    padding:8px 15px;
    border-radius:20px;
    cursor:pointer;
}

/* CART PANEL */
.cart{
    position:fixed;
    top:0;
    right:-400px;
    width:350px;
    height:100%;
    background:white;
    box-shadow:-4px 0 20px rgba(0,0,0,0.15);
    padding:20px;
    transition:0.3s;
    overflow-y:auto;
}

.cart.active{
    right:0;
}

.cart-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin:10px 0;
}

.cart-item button{
    margin:0 4px;
    padding:2px 6px;
}

.cart-total{
    font-weight:600;
    margin-top:15px;
}

input, select{
    width:100%;
    padding:8px;
    margin:8px 0;
    border:1px solid #d6b98c;
    border-radius:6px;
}

.checkout-btn{
    width:100%;
    padding:10px;
    background:#d6b98c;
    border:none;
    border-radius:8px;
    margin-top:10px;
    cursor:pointer;
}

.success{
    display:none;
    text-align:center;
    padding:40px;
    font-weight:600;
}

</style>
</head>

<body>

<header>
    <a href="index.html">
        <img src="logo.png">
    </a>

    <div class="cart-icon" onclick="toggleCart()">
        üõí Carrito
        <div class="cart-count" id="cartCount">0</div>
    </div>
</header>

<section>
<h1>Nuestro Men√∫</h1>

<div class="menu-item">
    <span>Pupusas (80 LPS)</span>
    <button onclick="addToCart('Pupusas',80)">Agregar</button>
</div>

<div class="menu-item">
    <span>Revueltas (90 LPS)</span>
    <button onclick="addToCart('Revueltas',90)">Agregar</button>
</div>

<div class="menu-item">
    <span>Baleadas (25 LPS)</span>
    <button onclick="addToCart('Baleadas',25)">Agregar</button>
</div>

<div class="menu-item">
    <span>Horchata (35 LPS)</span>
    <button onclick="addToCart('Horchata',35)">Agregar</button>
</div>

</section>

<!-- CART PANEL -->
<div class="cart" id="cart">
    <h2>üõí Tu Pedido</h2>
    <div id="cartItems"></div>
    <div class="cart-total">
        Total: <span id="cartTotal">0</span> LPS
    </div>

    <hr>

    <input type="text" id="nombre" placeholder="Nombre">
    <input type="tel" id="telefono" placeholder="Tel√©fono">

    <select id="pickupTime">
        <option value="">Hora de recogida</option>
        <option>15 minutos</option>
        <option>30 minutos</option>
        <option>45 minutos</option>
        <option>1 hora</option>
    </select>

    <button class="checkout-btn" onclick="checkout()">Finalizar Pedido</button>
</div>

<div id="successMessage" class="success">
    ‚úÖ Pedido enviado correctamente.
</div>

<script>

let cart=[];

function toggleCart(){
    document.getElementById("cart").classList.toggle("active");
}

function addToCart(name,price){
    let item=cart.find(i=>i.name===name);
    if(item){ item.quantity++; }
    else{ cart.push({name,price,quantity:1}); }
    renderCart();
}

function changeQty(index,amount){
    cart[index].quantity+=amount;
    if(cart[index].quantity<=0) cart.splice(index,1);
    renderCart();
}

function renderCart(){
    let cartItems=document.getElementById("cartItems");
    cartItems.innerHTML="";
    let total=0;
    let count=0;

    cart.forEach((item,index)=>{
        total+=item.price*item.quantity;
        count+=item.quantity;

        cartItems.innerHTML+=`
        <div class="cart-item">
            <div>
                ${item.name}<br>
                ${item.price} LPS
            </div>
            <div>
                <button onclick="changeQty(${index},-1)">‚àí</button>
                ${item.quantity}
                <button onclick="changeQty(${index},1)">+</button>
            </div>
        </div>`;
    });

    document.getElementById("cartTotal").innerText=total;
    document.getElementById("cartCount").innerText=count;
}

function checkout(){

    if(cart.length===0){
        alert("Agrega productos al carrito");
        return;
    }

    let nombre=document.getElementById("nombre").value;
    let telefono=document.getElementById("telefono").value;
    let pickup=document.getElementById("pickupTime").value;

    let total=0;
    let orderText="";

    cart.forEach(item=>{
        orderText+=`‚Ä¢ ${item.quantity} ${item.name}\n`;
        total+=item.price*item.quantity;
    });

    let emailBody=
        `Nuevo Pedido - Pupusas y M√°s\n\n`+
        `Nombre: ${nombre}\n`+
        `Tel√©fono: ${telefono}\n`+
        `Recoger en: ${pickup}\n\n`+
        `Pedido:\n${orderText}\n`+
        `Total: ${total} LPS`;

    // EMAIL SEND
    fetch("https://formsubmit.co/ajax/pupusasymashn@gmail.com",{
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
            name:nombre,
            message:emailBody,
            _subject:"Nuevo Pedido - Pupusas y M√°s"
        })
    });

    // WHATSAPP
    let mensaje=
        `üõéÔ∏è Nuevo Pedido - Pupusas y M√°s%0A%0A`+
        `üë§ Nombre: ${nombre}%0A`+
        `üìû Tel√©fono: ${telefono}%0A`+
        `‚è∞ Recoger en: ${pickup}%0A%0A`+
        `üìù Pedido:%0A${encodeURIComponent(orderText)}%0A`+
        `üí∞ Total: ${total} LPS`;

    window.open(`https://wa.me/50487809196?text=${mensaje}`,'_blank');

    document.getElementById("successMessage").style.display="block";
    document.getElementById("cart").classList.remove("active");

    cart=[];
    renderCart();
}

</script>

</body>
</html>
