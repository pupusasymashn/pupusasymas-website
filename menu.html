<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MenÃº | Pupusas y MÃ¡s</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
body{
margin:0;
font-family:'Poppins',sans-serif;
background:#f5efe6;
color:#3b2f2f;
}

/* HEADER */
header{
background:white;
padding:15px 30px;
box-shadow:0 2px 10px rgba(0,0,0,0.05);
text-align:center;
}

header img{
height:130px;
cursor:pointer;
}

/* SECTION */
section{
max-width:1000px;
margin:auto;
padding:50px 20px;
}

h1{
text-align:center;
font-family:'Playfair Display',serif;
margin-bottom:40px;
}

/* CATEGORY */
.category{
margin-top:60px;
}

.category h2{
border-bottom:2px solid #d6b98c;
padding-bottom:8px;
font-family:'Playfair Display',serif;
}

.note{
font-size:14px;
opacity:0.6;
margin-bottom:10px;
}

/* MENU ITEMS */
.menu-item{
display:flex;
justify-content:space-between;
align-items:center;
margin:18px 0;
}

.controls{
display:flex;
align-items:center;
}

.add-btn{
background:#d6b98c;
border:none;
padding:6px 16px;
border-radius:25px;
cursor:pointer;
transition:0.2s;
font-family:'Poppins',sans-serif;
color:#3b2f2f !important;
}

.add-btn:hover{
transform:scale(1.05);
}

.qty-controls{
display:flex;
align-items:center;
}

.qty-controls button{
padding:2px 10px;
margin:0 6px;
border:none;
background:#d6b98c;
border-radius:15px;
cursor:pointer;
}

/* FLOATING CART */
.cart-float{
position:fixed;
bottom:25px;
right:25px;
background:#d6b98c;
padding:14px 22px;
border-radius:30px;
cursor:pointer;
box-shadow:0 8px 20px rgba(0,0,0,0.2);
font-weight:600;
z-index:1000;
}

.cart-count{
margin-left:6px;
background:#3b2f2f;
color:white;
padding:3px 7px;
border-radius:50%;
font-size:12px;
}

/* OVERLAY */
.overlay{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.3);
opacity:0;
pointer-events:none;
transition:0.3s;
z-index:900;
}

.overlay.active{
opacity:1;
pointer-events:auto;
}

/* CART PANEL */
.cart{
position:fixed;
top:0;
right:-420px;
width:380px;
height:100%;
background:white;
box-shadow:-4px 0 25px rgba(0,0,0,0.2);
padding:25px;
transition:0.35s ease;
overflow-y:auto;
z-index:1001;
}

.cart.active{
right:0;
}

.cart-header{
display:flex;
justify-content:space-between;
align-items:center;
}

.close-cart{
cursor:pointer;
font-size:22px;
}

/* ALIGNED CART ITEMS */
.cart-item{
display:grid;
grid-template-columns:1fr auto auto;
align-items:center;
gap:10px;
margin:12px 0;
}

.cart-item span.price{
min-width:90px;
text-align:right;
font-weight:500;
}

.remove-btn{
background:none;
border:1px solid #d6b98c;
padding:4px 10px;
border-radius:6px;
cursor:pointer;
font-size:13px;
color:#3b2f2f;
transition:0.2s;
}

.remove-btn:hover{
background:#d6b98c;
}

.cart-total{
font-weight:600;
margin-top:15px;
}

input,select,textarea{
width:100%;
padding:8px;
margin:8px 0;
border:1px solid #d6b98c;
border-radius:6px;
}

.checkout-btn{
width:100%;
padding:12px;
background:#d6b98c;
border:none;
border-radius:8px;
margin-top:10px;
cursor:pointer;
font-weight:600;
}

.closed-message{
color:red;
font-weight:600;
text-align:center;
margin-top:10px;
}

/* MOBILE */
@media (max-width:768px){
.menu-item{
flex-direction:column;
align-items:flex-start;
gap:8px;
}
.cart{
width:100%;
}
}
</style>
</head>

<body>

<header>
<a href="index.html"><img src="logo.png"></a>
</header>

<section>
<h1>Nuestro MenÃº</h1>

<!-- PUPUSAS -->
<div class="category">
<h2>Pupusas (Orden de 2)</h2>

<div class="menu-item"><span>Mixtas â€“ 80 LPS</span><div class="controls" id="Mixtas-control"><button class="add-btn" onclick="addItem('Mixtas',80)">Agregar</button></div></div>
<div class="menu-item"><span>Quesillo â€“ 80 LPS</span><div class="controls" id="Quesillo-control"><button class="add-btn" onclick="addItem('Quesillo',80)">Agregar</button></div></div>
<div class="menu-item"><span>Chorizo Quesillo â€“ 80 LPS</span><div class="controls" id="ChorizoQuesillo-control"><button class="add-btn" onclick="addItem('Chorizo Quesillo',80)">Agregar</button></div></div>
<div class="menu-item"><span>Loroco Quesillo â€“ 80 LPS</span><div class="controls" id="LorocoQuesillo-control"><button class="add-btn" onclick="addItem('Loroco Quesillo',80)">Agregar</button></div></div>
<div class="menu-item"><span>Frijoles Quesillo â€“ 80 LPS</span><div class="controls" id="FrijolesQuesillo-control"><button class="add-btn" onclick="addItem('Frijoles Quesillo',80)">Agregar</button></div></div>
<div class="menu-item"><span>Revueltas â€“ 90 LPS</span><div class="controls" id="Revueltas-control"><button class="add-btn" onclick="addItem('Revueltas',90)">Agregar</button></div></div>
<div class="menu-item"><span>Extra Repollo y Encurtido â€“ 25 LPS</span><div class="controls" id="ExtraRepolloyEncurtido-control"><button class="add-btn" onclick="addItem('Extra Repollo y Encurtido',25)">Agregar</button></div></div>
</div>

<!-- BALEADAS -->
<div class="category">
<h2>Baleadas</h2>

<div class="menu-item"><span>Sencilla â€“ 25 LPS</span><div class="controls" id="Sencilla-control"><button class="add-btn" onclick="addItem('Sencilla',25)">Agregar</button></div></div>
<div class="menu-item"><span>Huevo â€“ 30 LPS</span><div class="controls" id="Huevo-control"><button class="add-btn" onclick="addItem('Huevo',30)">Agregar</button></div></div>
<div class="menu-item"><span>Sencilla Pollo â€“ 40 LPS</span><div class="controls" id="SencillaPollo-control"><button class="add-btn" onclick="addItem('Sencilla Pollo',40)">Agregar</button></div></div>
<div class="menu-item"><span>Huevo Pollo â€“ 50 LPS</span><div class="controls" id="HuevoPollo-control"><button class="add-btn" onclick="addItem('Huevo Pollo',50)">Agregar</button></div></div>
<div class="menu-item"><span>Sencilla Chorizo â€“ 40 LPS</span><div class="controls" id="SencillaChorizo-control"><button class="add-btn" onclick="addItem('Sencilla Chorizo',40)">Agregar</button></div></div>
<div class="menu-item"><span>Huevo Chorizo â€“ 50 LPS</span><div class="controls" id="HuevoChorizo-control"><button class="add-btn" onclick="addItem('Huevo Chorizo',50)">Agregar</button></div></div>
<div class="menu-item"><span>Sencilla Embutido â€“ 40 LPS</span><div class="controls" id="SencillaEmbutido-control"><button class="add-btn" onclick="addItem('Sencilla Embutido',40)">Agregar</button></div></div>
<div class="menu-item"><span>Huevo Embutido â€“ 50 LPS</span><div class="controls" id="HuevoEmbutido-control"><button class="add-btn" onclick="addItem('Huevo Embutido',50)">Agregar</button></div></div>
</div>

<!-- DESAYUNOS -->
<div class="category">
<h2>Desayunos</h2>

<div class="menu-item"><span>Desayuno Completo â€“ 120 LPS</span><div class="controls" id="DesayunoCompleto-control"><button class="add-btn" onclick="addItem('Desayuno Completo',120)">Agregar</button></div></div>
<div class="menu-item"><span>Tortillas con Quesillo (Orden de 2) â€“ 60 LPS</span><div class="controls" id="TortillasconQuesillo-control"><button class="add-btn" onclick="addItem('Tortillas con Quesillo',60)">Agregar</button></div></div>
</div>

<!-- ALMUERZOS -->
<div class="category">
<h2>Almuerzos</h2>
<div class="note">12:00PM â€“ 1:30PM</div>

<div class="menu-item"><span>Tacos Flauta de Pollo â€“ 120 LPS</span><div class="controls" id="TacosFlautadePollo-control"><button class="add-btn" onclick="addItem('Tacos Flauta de Pollo',120)">Agregar</button></div></div>
<div class="menu-item"><span>Tacos Mexicanos â€“ 120 LPS</span><div class="controls" id="TacosMexicanos-control"><button class="add-btn" onclick="addItem('Tacos Mexicanos',120)">Agregar</button></div></div>
<div class="menu-item"><span>Gringas de Pollo â€“ 55 LPS</span><div class="controls" id="GringasdePollo-control"><button class="add-btn" onclick="addItem('Gringas de Pollo',55)">Agregar</button></div></div>
<div class="menu-item"><span>PlÃ¡tano Frito â€“ 55 LPS</span><div class="controls" id="PlÃ¡tanoFrito-control"><button class="add-btn" onclick="addItem('PlÃ¡tano Frito',55)">Agregar</button></div></div>
<div class="menu-item"><span>Burrita â€“ 45 LPS</span><div class="controls" id="Burrita-control"><button class="add-btn" onclick="addItem('Burrita',45)">Agregar</button></div></div>
<div class="menu-item"><span>Chuleta, Costilla o Pollo â€“ 140 LPS</span><div class="controls" id="ChuletaCostillaoPollo-control"><button class="add-btn" onclick="addItem('Chuleta / Costilla / Pollo',140)">Agregar</button></div></div>
</div>

<!-- BEBIDAS -->
<div class="category">
<h2>Bebidas</h2>

<div class="menu-item"><span>Horchata â€“ 35 LPS</span><div class="controls" id="Horchata-control"><button class="add-btn" onclick="addItem('Horchata',35)">Agregar</button></div></div>
<div class="menu-item"><span>Limonada â€“ 40 LPS</span><div class="controls" id="Limonada-control"><button class="add-btn" onclick="addItem('Limonada',40)">Agregar</button></div></div>
<div class="menu-item"><span>Jamaica â€“ 40 LPS</span><div class="controls" id="Jamaica-control"><button class="add-btn" onclick="addItem('Jamaica',40)">Agregar</button></div></div>
</div>

</section>

<div class="cart-float" onclick="toggleCart()">
ðŸ›’ Carrito <span class="cart-count" id="cartCount">0</span>
</div>

<div class="overlay" id="overlay" onclick="toggleCart()"></div>

<div class="cart" id="cart">
<div class="cart-header">
<h2>Tu Pedido</h2>
<div class="close-cart" onclick="toggleCart()">âœ•</div>
</div>

<div id="cartItems"></div>
<div class="cart-total">Total: <span id="cartTotal">0</span> LPS</div>

<hr>

<textarea id="notas" placeholder="Notas especiales"></textarea>
<input type="text" id="nombre" placeholder="Nombre">
<input type="tel" id="telefono" placeholder="TelÃ©fono">

<select id="pickupTime">
<option value="">Hora de recogida</option>
<option>15 minutos</option>
<option>30 minutos</option>
<option>45 minutos</option>
<option>1 hora</option>
<option>2 horas</option>
</select>

<button class="checkout-btn" id="checkoutBtn" onclick="checkout()">Finalizar Pedido</button>
<div class="closed-message" id="closedMessage"></div>

</div>

<script>
let cart=JSON.parse(localStorage.getItem("cart"))||{};
function saveCart(){ localStorage.setItem("cart",JSON.stringify(cart)); }

function toggleCart(){
document.getElementById("cart").classList.toggle("active");
document.getElementById("overlay").classList.toggle("active");
}

function getControlId(name){
return name.replace(/[^a-zA-Z0-9]/g,'')+"-control";
}

function addItem(name,price){
cart[name]={price:price,qty:1};
renderMenuControl(name);
renderCart();
saveCart();
}

function changeQty(name,amount){
cart[name].qty+=amount;
if(cart[name].qty<=0){
delete cart[name];
resetControl(name);
}
renderCart();
renderMenuControl(name);
saveCart();
}

function removeItem(name){
delete cart[name];
resetControl(name);
renderCart();
saveCart();
}

function resetControl(name){
let id=getControlId(name);
document.getElementById(id).innerHTML=
`<button class="add-btn" onclick="addItem('${name}',${cart[name]?.price||0})">Agregar</button>`;
}

function renderMenuControl(name){
if(!cart[name]) return;
let id=getControlId(name);
document.getElementById(id).innerHTML=
`<div class="qty-controls">
<button onclick="changeQty('${name}',-1)">âˆ’</button>
${cart[name].qty}
<button onclick="changeQty('${name}',1)">+</button>
</div>`;
}

function renderCart(){
let cartItems=document.getElementById("cartItems");
cartItems.innerHTML="";
let total=0;
let count=0;

for(let item in cart){
total+=cart[item].price*cart[item].qty;
count+=cart[item].qty;

cartItems.innerHTML+=`
<div class="cart-item">
<div>${cart[item].qty} ${item}</div>
<span class="price">${cart[item].price*cart[item].qty} LPS</span>
<button class="remove-btn" onclick="removeItem('${item}')">Eliminar</button>
</div>`;
}

document.getElementById("cartTotal").innerText=total;
document.getElementById("cartCount").innerText=count;
}

function isOpen(){
let now=new Date();
let day=now.getDay();
if(day===0) return false;
let current=now.getHours()*60+now.getMinutes();
let mOpen=7*60+30, mClose=13*60+30;
let eOpen=17*60, eClose=21*60;
return (current>=mOpen && current<=mClose) || (current>=eOpen && current<=eClose);
}

function checkout(){
if(!isOpen()){ alert("Estamos cerrados."); return; }

let nombre=document.getElementById("nombre").value;
let telefono=document.getElementById("telefono").value;
let pickup=document.getElementById("pickupTime").value;
let notas=document.getElementById("notas").value;

let total=0;
let orderText="";

for(let item in cart){
orderText+=`â€¢ ${cart[item].qty} ${item}\n`;
total+=cart[item].price*cart[item].qty;
}

let message=
`ðŸ›Žï¸ Nuevo Pedido\n\n`+
`ðŸ‘¤ ${nombre}\n`+
`ðŸ“ž ${telefono}\n`+
`â° ${pickup}\n\n`+
`ðŸ“ Pedido:\n${orderText}\n\n`+
`ðŸ—’ Notas: ${notas}\n\n`+
`ðŸ’° Total: ${total} LPS`;

fetch("https://formsubmit.co/ajax/pupusasymashn@gmail.com",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
name:nombre,
message:message,
_subject:"Nuevo Pedido - Pupusas y MÃ¡s"
})
});

window.open(`https://wa.me/50487809196?text=${encodeURIComponent(message)}`,'_blank');

localStorage.removeItem("cart");
cart={};
renderCart();
toggleCart();
alert("Pedido enviado correctamente.");
}

renderCart();
</script>

</body>
</html>
